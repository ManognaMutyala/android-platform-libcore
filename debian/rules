#!/usr/bin/make -f

include /usr/share/dpkg/pkg-info.mk

UPSTREAM_TAG = android-$(subst +,_,$(DEB_VERSION_UPSTREAM))
GRADLE_OPTIONS = --settings-file debian/settings.gradle --offline \
                 --gradle-user-home debian/.gradlehome

%:
	dh $@ --with maven_repo_helper

override_dh_auto_build:
	gradle $(GRADLE_OPTIONS) assemble poms javadoc
	jh_depends

override_dh_auto_clean:
	gradle $(GRADLE_OPTIONS) clean
	$(RM) -r debian/.gradle debian/.gradlehome .gradle
	$(RM) debian/*.pom

get-orig-source:
	wget --continue https://android.googlesource.com/platform/libcore/+archive/$(UPSTREAM_TAG).tar.gz
